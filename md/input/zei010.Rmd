---
always_allow_html: yes
output:
  html_document: default
params: 
  lang: "FR"
  numpage: 19
---

```{r setup, include=F}
knitr::opts_chunk$set(echo = FALSE)
knitr::read_chunk("../../R/tool.R")
knitr::read_chunk("../../R/data.R")
knitr::read_chunk("../../R/ccze_init_table.R")
knitr::read_chunk("../../R/ccze_footer.R")
```
```{r}
<<init>>
<<tool>>
<<data>>
```
```{r include=T}
includeCSS("../../css/ccze.css")
```
```{r}
data.collection <- getDataCollection("../../data/input/ze!nonquot")
```

## `r ifelse(params$lang=="FR","Indicateurs de performances au sein de la zone euro","Performance indicators within the euro area")`

***
<p class="unitlegend">*`r ifelse(params$lang=="FR","Glissement annuel en pourcentage","Year-overyear percentage change")`*</p>
<p class="titlechart title">**`r ifelse(params$lang=="FR","Co&ucirc;t total horaire de la main-d'&oelig;uvre","Hourly labour cost")`** *`r tags$sup("(a)(b)")`*</p>

```{r}

#get data & metadata
data.y <- tail(getData(data.collection,"ZEI010AD1.TXT")[[2]],3)
data.q <- tail(getData(data.collection,"ZEI010AD2.TXT")[[2]],13)
meta <- getData(data.collection,"ZEI010AD1.TXT")[[1]]

#select series
series <- c(1, #variable
            2, #France
            3, #Germany
            4, #Austria
            5, #Belgium
            6, #Spain
            7, #Finland
            8, #Greece
            9, #Ireland
            10, #Italy
            11, #Luxembourg
            12, #Netherlands
            13, #Portugal
            14, #Slovenia
            15) #Euro area 

data.y <- t(data.y[,series])
data.q <- t(data.q[,series])

# print(data.y)
# print(data.q)

# #set date periods to quarter format
# data$date <- format(as.yearqtr(data$date,"%Y-%m"),ifelse(params$lang=="FR",
#                                                         "T%q %Y",
#                                                         "%Y Q%q"))

# #keep current year + 7 previous whole years
# end.period <- tail(grep(ifelse(params$lang=="FR","T1","Q1"),data$date),1)
# begin.period <- end.period-28
# end.period <- length(data$date)
# periods <- rev(seq(end.period,begin.period,-1))
# dat <- data[periods,series]
# rm(begin.period,end.period)

#set metadata
met <- as.character(meta[2,series])
met <- trimws(unlist(lapply(strsplit(met,":"),"[[",1)))
met <- countrynameFR2EN(met)

#generate datatable
data <- as.data.frame(cbind(data.y,data.q), stringsAsFactors=F)
colnames(data)
data$date <- met

t1 <- datatable(data)

# #min and max of Y-Axis for the two charts
# c_max <- ceiling(max(dat[,-c(1)]))
# c_min <- floor(min(dat[,-c(1)]))



# #ouput the charts in HTML
# div(class = "hc-link-legend",
#     tags$table(
#       tags$tr(
#         tags$td(c1),
#         tags$td(c2))
#     )
# )
t1

```

<p>&nbsp;</p>
<p class="titlechart">**`r ifelse(params$lang=="FR","Co&ucirc;t salarial horaire","Hourly wage cost")`** *`r tags$sup("(b)")`*</p>

```{r}



```{r eval = T}
<<footer>>
```


